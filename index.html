<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ronzer AI (G2 & R2)</title>
<style>
  body{margin:0;background:#0d0d0f;color:#fff;font-family:"Inter",sans-serif;display:flex;flex-direction:column;height:100vh;}
  header{display:flex;justify-content:space-between;align-items:center;padding:12px 20px;font-size:18px;font-weight:600;background:linear-gradient(90deg,#00ffff44,#00ff8844);color:#00ffc6;border-bottom:1px solid #00ffc620;}
  select{background:#0f0f10;color:#00ffc6;border:1px solid #00ffc620;border-radius:8px;padding:6px 10px;font-size:14px;cursor:pointer;outline:none;}
  #chat-container{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:15px;}
  .message{max-width:80%;padding:12px 16px;border-radius:16px;line-height:1.4;animation:fadeIn .4s ease-in;}
  .user{align-self:flex-end;background:#0078ff;border-bottom-right-radius:4px;}
  .bot{align-self:flex-start;background:#1a1a1f;border:1px solid #00ffc650;border-bottom-left-radius:4px;box-shadow:0 0 10px #00ffc633;}
  #input-area{display:flex;padding:10px;border-top:1px solid #222;background:#0f0f10;}
  #input{flex:1;background:#18181b;border:1px solid #333;border-radius:12px;padding:10px 14px;color:#fff;font-size:15px;outline:none;}
  #send{margin-left:10px;padding:10px 18px;background:linear-gradient(90deg,#00ffc6,#0078ff);border:none;border-radius:12px;color:#000;font-weight:bold;cursor:pointer;transition:all .2s;}
  #send:hover{transform:scale(1.05);box-shadow:0 0 10px #00ffc6;}
  @keyframes fadeIn{from{opacity:0;transform:translateY(5px);}to{opacity:1;transform:translateY(0);}}
  @keyframes blink{0%,100%{opacity:.2;}50%{opacity:1;}}
  .typing{display:inline-block;width:4px;height:16px;background:#00ffc6;margin-left:3px;animation:blink 1s infinite;}
</style>
</head>
<body>
<header>
  🤖 Ronzer AI
  <select id="modelSelect">
    <option value="R2">R2</option>
    <option value="G2">G2</option>
  </select>
</header>

<div id="chat-container"></div>
<div id="input-area">
  <input id="input" placeholder="Type your message..." />
  <button id="send">Send</button>
</div>

<script type="module">
const chatContainer = document.getElementById('chat-container');
const input = document.getElementById('input');
const sendBtn = document.getElementById('send');
const modelSelect = document.getElementById('modelSelect');

const GROQ_API_KEY   = "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";   // 🧠 R2 key
const GEMINI_API_KEY = "AIzaSyDA7DtBJlxx-kz3V4WVEkdCpccGEo1mQkA"; // ⚡ G2 key

sendBtn.onclick = sendMessage;
input.addEventListener("keypress", e => { if (e.key === "Enter") sendMessage(); });

async function sendMessage() {
  const msg = input.value.trim();
  if (!msg) return;
  appendMessage(msg,'user');
  input.value="";
  const botDiv=appendMessage('', 'bot', true);
  const model=modelSelect.value;
  model==="R2"?streamGroq(msg,botDiv):gemini(msg,botDiv);
}

function appendMessage(text, sender, stream=false){
  const div=document.createElement('div');
  div.classList.add('message',sender);
  div.innerHTML=text||'<span class="typing"></span>';
  chatContainer.appendChild(div);
  chatContainer.scrollTop=chatContainer.scrollHeight;
  return div;
}

/* ─── 🤖 R2 (Groq GPT-OSS-20B) ───────────────────────────── */
async function streamGroq(userInput, botDiv){
 try{
   const res=await fetch("https://api.groq.com/openai/v1/chat/completions",{
     method:"POST",
     headers:{
       "Content-Type":"application/json",
       "Authorization":`Bearer ${GROQ_API_KEY}`
     },
     body:JSON.stringify({
       model:"openai/gpt-oss-20b",
       messages:[{role:"user",content:userInput}],
       stream:true
     })
   });
   if(!res.ok) throw new Error("HTTP "+res.status);
   const reader=res.body.getReader();
   const dec=new TextDecoder("utf-8");
   let text="";
   botDiv.innerHTML="";
   while(true){
     const {done,value}=await reader.read();
     if(done) break;
     const chunk=dec.decode(value);
     const lines=chunk.split("\n").filter(l=>l.startsWith("data:"));
     for(const line of lines){
       const json=line.replace("data: ","");
       if(json==="[DONE]") break;
       try{
         const parsed=JSON.parse(json);
         const delta=parsed.choices?.[0]?.delta?.content||"";
         text+=delta;botDiv.textContent=text;
       }catch{}
     }
     chatContainer.scrollTop=chatContainer.scrollHeight;
   }
 }catch(e){botDiv.textContent="⚠️ R2 Error: "+e.message;}
}

/* ─── ⚡ G2 (Gemini-2.5-Flash) ───────────────────────────── */
async function gemini(userInput, botDiv){
 try{
   const res=await fetch(
     `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${GEMINI_API_KEY}`,
     {
       method:"POST",
       headers:{"Content-Type":"application/json"},
       body:JSON.stringify({
         contents:[{parts:[{text:userInput}]}]
       })
     }
   );
   const data=await res.json();
   const text=data?.candidates?.[0]?.content?.parts?.[0]?.text || "⚠️ No response from Gemini.";
   botDiv.textContent=text;
 }catch(e){
   botDiv.textContent="⚠️ G2 Error: "+e.message;
 }
}
</script>
</body>
</html>
